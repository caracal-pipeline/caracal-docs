<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &amp; Run &mdash; CARACal latest documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Manual" href="manual/index.html" />
    <link rel="prev" title="CARACal" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
            <a href="index.html"><img src="_static/caracal_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                latest
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation &amp; Run</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#usage-and-publication-policy">Usage and publication policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#manual-installation">Manual installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-with-the-caratekit-sh-script">Installation with the caratekit.sh script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-on-ilifu-slurm-environment">Installation on ILIFU slurm environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run">Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="#known-and-new-issues">Known and new issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="manual/index.html">Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits/index.html">Acknowledgements</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CARACal</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Installation &amp; Run</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/caracalREADME.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="installation-run">
<h1>Installation &amp; Run<a class="headerlink" href="#installation-run" title="Permalink to this headline">¶</a></h1>
<div class="section" id="usage-and-publication-policy">
<h2>Usage and publication policy<a class="headerlink" href="#usage-and-publication-policy" title="Permalink to this headline">¶</a></h2>
<p>When using CARACal please be aware of and adhere to the <a class="reference external" href="https://docs.google.com/document/d/e/2PACX-1vTqZoKhdewnWvxvEI4C9DxI-IHP1FTCoC5Iqz_MqlX63q8UnnpcqoZvVf-sSfqACu8sA_nufkXICUH6/pub">CARACal publication policy</a>.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://www.python.org">Python</a> 3.5 or higher.</p></li>
<li><p>Container technology of your choice. It can be one of the following:</p>
<ul>
<li><p><a class="reference external" href="https://www.docker.com">Docker</a>;</p></li>
<li><p><a class="reference external" href="https://github.com/sylabs/singularity">Singularity</a> 3.5 - 3.9 (nearly all functionality available for &gt; 2.6.0-dist, see <a class="reference external" href="https://github.com/caracal-pipeline/caracal/issues/1154">here</a> for further information)</p></li>
<li><p><a class="reference external" href="https://podman.io">Podman</a> <strong>(currently not fully supported)</strong>.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="manual-installation">
<h2>Manual installation<a class="headerlink" href="#manual-installation" title="Permalink to this headline">¶</a></h2>
<p>We strongly recommend and describe an installation using a Python3 virtual environment. Only try outside a virtual environment if you know what you are doing. Any name as <code class="docutils literal notranslate"><span class="pre">${name}</span></code> occurring in the description below can be chosen arbitrarily. If it symbolises directories or files, those directories or files should exist and the user should have write acccess.</p>
<p>Choose the name of the virtual environment <code class="docutils literal notranslate"><span class="pre">${caracal-venv}</span></code>. Then:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>python3 -m venv ${caracal-venv}
# OR, if the command above does not work
#virtualenv -p python3 ${caracal-venv}

source ${caracal-venv}/bin/activate
pip install -U pip setuptools wheel

# CARACal stable release
pip install -U caracal
# OR CARACal developer version
#pip install -U git+https://github.com/ska-sa/caracal.git#egg=caracal
</pre></div>
</div>
<p><em>(Ignore any error messages concerning pyregion.)</em></p>
<p>In case you are <em>not</em> carrying out a fresh installation, remove earlier Stimela images with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stimela</span> <span class="n">clean</span> <span class="o">-</span><span class="n">ac</span>
</pre></div>
</div>
<!-- Then, if using [Docker](https://www.docker.com):

```
stimela pull
```
--><p>If using <a class="reference external" href="https://github.com/sylabs/singularity">Singularity</a>, choose a pull folder <code class="docutils literal notranslate"><span class="pre">${singularity_pull_folder}</span></code>, where the <a class="reference external" href="https://github.com/sylabs/singularity">Singularity</a> images are stored and define an environment variable by adding this in the rc file of your shell (e.g. .bashrc):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export SINGULARITY_PULLFOLDER=${WORKSPACE_ROOT}/singularity_images
</pre></div>
</div>
<p>and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stimela</span> <span class="n">pull</span> <span class="o">-</span><span class="n">s</span>
</pre></div>
</div>
<p>If using <a class="reference external" href="https://podman.io">Podman</a> (currently not fully supported):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stimela</span> <span class="n">pull</span> <span class="o">-</span><span class="n">p</span>
</pre></div>
</div>
</div>
<div class="section" id="installation-with-the-caratekit-sh-script">
<h2>Installation with the caratekit.sh script<a class="headerlink" href="#installation-with-the-caratekit-sh-script" title="Permalink to this headline">¶</a></h2>
<p>Download the installation script <a class="reference external" href="https://github.com/caracal-pipeline/caracal/blob/master/caratekit.sh">caratekit.sh</a> . Choose the parent directory <code class="docutils literal notranslate"><span class="pre">${workspace}</span></code> and the name of the CARACal directory <code class="docutils literal notranslate"><span class="pre">${caracal_dir}</span></code>. Any name as <code class="docutils literal notranslate"><span class="pre">${name}</span></code> occurring in the description below can be chosen arbitrarily. If it symbolises directories or files, those directories or files should exist and the user should have write acccess.</p>
<p>If using <a class="reference external" href="https://www.docker.com">Docker</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>caratekit.sh -ws ${workspace} -cr -di -ct ${caracal_dir} -rp install -f -kh
</pre></div>
</div>
<p>If using <a class="reference external" href="https://github.com/sylabs/singularity">Singularity</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>caratekit.sh -ws ${workspace} -cr -si -ct ${caracal_testdir} -rp install -f -kh
</pre></div>
</div>
</div>
<div class="section" id="installation-on-ilifu-slurm-environment">
<h2>Installation on ILIFU slurm environment<a class="headerlink" href="#installation-on-ilifu-slurm-environment" title="Permalink to this headline">¶</a></h2>
<p>The installation of CARACal on ilifu has been tried and tested on the Ubuntu 20.0 operating system, although, it should also work on other OS versions. On the login node, follow these instuctions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">working</span><span class="o">/</span><span class="n">area</span>
<span class="n">module</span> <span class="n">add</span> <span class="n">python</span><span class="o">/</span><span class="mf">3.9</span><span class="o">.</span><span class="mi">4</span>
<span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">venv</span> <span class="o">&lt;</span><span class="n">venv</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
<span class="n">source</span> <span class="o">&lt;</span><span class="n">venv</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pip</span> <span class="n">setuptools</span> <span class="n">wheel</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">caracal</span><span class="o">-</span><span class="n">pipeline</span><span class="o">/</span><span class="n">caracal</span><span class="o">.</span><span class="n">git</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="o">-</span><span class="n">e</span> <span class="n">caracal</span>
<span class="n">deactivate</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">/path/to/working/area</span></code> is the actual path to the directory where you wish to install CARACal.
In principle, this can also be done in the Slurm environment of ILIFU by submitting an sbatch script. If you prefer working with the released version of CARACal, please skip the step:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">caracal</span><span class="o">-</span><span class="n">pipeline</span><span class="o">/</span><span class="n">caracal</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>and modify the next step to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">caracal</span>
</pre></div>
</div>
<p>NB: The stimela singularity images needed for CARACal are stored in this location:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">software</span><span class="o">/</span><span class="n">astro</span><span class="o">/</span><span class="n">caracal</span><span class="o">/</span>
</pre></div>
</div>
<p>where you can access the latest version of the images, for example, <code class="docutils literal notranslate"><span class="pre">/software/astro/caracal/STIMELA_IMAGES_1.7.0</span></code>.</p>
</div>
<div class="section" id="run">
<h2>Run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h2>
<p>If you installed CARACal manually, activate the virtual environment with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>source ${caracal-venv}/bin/activate
</pre></div>
</div>
<p>If you installed CARACal with the caratekit.sh script, activate the virtual environment with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>source ${workspace}/${caracal_dir}/caracal_venv/bin/activate
</pre></div>
</div>
<p>If using <a class="reference external" href="https://www.docker.com">Docker</a> run CARACal with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>caracal -c ${your-configuration-file}
</pre></div>
</div>
<p>If using <a class="reference external" href="https://github.com/sylabs/singularity">Singularity</a> run CARACal with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>caracal -ct singularity -c ${your-configuration-file}
</pre></div>
</div>
<p>For more detailed installation instructions, trouble-shooting tips and a full user manual please see <a class="reference external" href="https://caracal.readthedocs.io">caracal.readthedocs.io</a>.</p>
</div>
<div class="section" id="known-and-new-issues">
<h2>Known and new issues<a class="headerlink" href="#known-and-new-issues" title="Permalink to this headline">¶</a></h2>
<p>We encourage users who experience problems installing or running CARACal to check for known issues or open a new issue at
our <a class="reference external" href="https://github.com/caracal-pipeline/caracal/issues">GitHub issues page</a>. When opening a new issue, please include your installation type (e.g., Docker, Singularity), software version (both CARACal and Stimela), CARACal configuration file, and CARACal log files.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="CARACal" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="manual/index.html" class="btn btn-neutral float-right" title="Manual" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, CARACal team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>